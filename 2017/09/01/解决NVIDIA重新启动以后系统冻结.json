{
    "attributes": {
        "title": "解决NVIDIA重新启动以后系统冻结",
        "date": "2017-09-01T17:01:47.000Z",
        "tags": "linux"
    },
    "body": "<p>分期买了一台神舟 Z6-kp5s1，配置还不错，够用三年了，但是在linux下使用bumblebee的时候，发生了问题，折腾了好久，现在把解决方法写出来。\n先说一下问题吧，正常安装bumblebee、bbswitch和nvidia驱动，重新启动系统以后，系统出现冻结，没有任何的输入输出，没有任何日志产生。问题似乎是固件错误，详情查看<a href=\"https://github.com/Bumblebee-Project/Bumblebee/issues/764\">讨论</a>和Linux的bug<a href=\"https://bugzilla.kernel.org/show_bug.cgi?id=156341\">讨论</a>。\n解决方法是看的<a href=\"https://witiko.github.io/Optimus-on-Linux/\">Witiko</a>的博客，通过给内核传递参数来防止系统出现冻结。修改/etc/default/grub,在文件底部追加以下内容：</p>\n<pre><code># Bumblebee 3.2.1 fix (see https://github.com/Bumblebee-Project/Bumblebee/issues/764)\nGRUB_CMDLINE_LINUX_DEFAULT=&quot;$GRUB_CMDLINE_LINUX_DEFAULT &quot;'acpi_osi=! acpi_osi=&quot;Windows 2009&quot;'\n</code></pre>\n<p>如果不放心，请先禁用登录管理器，防止开机就出现冻结，然后尝试手动启动登录管理器。在tty登录，然后执行：</p>\n<pre><code>sudo systemctl start display-manager.service\n</code></pre>\n<p>如果一切正常，你将会看到图形，并且lspci -v中能看到nvidia已经被禁用，然后使用提供的测试方法进行测试，可以看到nvidia被启用，关闭测试成功，nvidia被禁用。\n提供一下我关闭nvidia以后的使用和续航时间吧。亮度调节为50%，cpu设置为powersave，运行了一下程序：</p>\n<ul>\n<li>telegram</li>\n<li>chrome</li>\n<li>dde-file-manager</li>\n<li>vs code</li>\n<li>meow</li>\n<li>若干ss client</li>\n<li>还有一大堆乱七八糟的服务，懒得写了\n从14:35开始断电测试，到17:17还有23%的电量。</li>\n</ul>\n",
    "id": "c645e3813dd8fb761443201118a68bf7",
    "link": "/2017/09/01/解决NVIDIA重新启动以后系统冻结"
}