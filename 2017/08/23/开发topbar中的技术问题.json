{
    "attributes": {
        "title": "开发topbar中的技术问题",
        "date": "2017-08-23T08:54:56.000Z",
        "tags": null
    },
    "body": "<p>这里记录了开发topbar中遇到的坑和一些问题。\n使用Qt提供的qxcb方法注册阴影为dock类型，反而处于DESKTOP和NORMAL之间。其实当初并不是想设置为DOCK类型的，因为这样阴影也会在窗口上方，我希望的是阴影在普通程序下方，在桌面上方。今天曹哥来讲窗管的一些坑，讲到窗管是如何控制窗口的，我的阴影其实是被Qt注册成_NET_WM_STATE_BELOW了。\n<a href=\"https://specifications.freedesktop.org/wm-spec/1.3/ar01s05.html\">这里可以看到一些type的介绍</a>。\n在_NET_WM_STATE中一共有这么几个类型：</p>\n<pre><code>_NET_WM_STATE_MODAL, ATOM\n_NET_WM_STATE_STICKY, ATOM\n_NET_WM_STATE_MAXIMIZED_VERT, ATOM\n_NET_WM_STATE_MAXIMIZED_HORZ, ATOM\n_NET_WM_STATE_SHADED, ATOM\n_NET_WM_STATE_SKIP_TASKBAR, ATOM\n_NET_WM_STATE_SKIP_PAGER, ATOM\n_NET_WM_STATE_HIDDEN, ATOM\n_NET_WM_STATE_FULLSCREEN, ATOM\n_NET_WM_STATE_ABOVE, ATOM\n_NET_WM_STATE_BELOW, ATOM\n_NET_WM_STATE_DEMANDS_ATTENTION, ATOM\n</code></pre>\n<p>如果程序被注册成_NET_WM_STATE_BELOW，则会被放置在DESKTOP之上的一层。不是很清楚Qt是出于什么策略，才把我的阴影注册为这个状态，反而是刚好满足了我的需求。\n这要多谢曹哥了，我才终于明白了为什么会这样，以及以后如何正确的设置type。\n<img src=\"DeepinScreenshot_%E6%A1%8C%E9%9D%A2_20170823201608.png\" alt=\"DESKTOP1\" title=\"我老婆\">\n<img src=\"DeepinScreenshot_%E6%A1%8C%E9%9D%A2_20170823201641.png\" alt=\"DESKTOP2\"></p>\n",
    "id": "932abc55aac0e50579fd73d2292c8650",
    "link": "/2017/08/23/开发topbar中的技术问题"
}